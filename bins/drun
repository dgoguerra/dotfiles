#!/usr/bin/env bash

BOLDGREEN='\033[0;32m\033[1m'
NOCOLOR='\033[0m'

echo -e "${BOLDGREEN}docker build .${NOCOLOR}"

# Use tee to capture the created image ID from the build output,
#Â while still showing it in stdout.
IMAGE_ID=$(docker build . | tee /dev/fd/2 | grep "Successfully built " | cut -d ' ' -f 3)

[[ "$IMAGE_ID" == "" ]] && exit 1

echo -e "${GREEN}docker run --rm -it $@ $IMAGE_ID${NOCOLOR}"

docker run --rm -it $@ $IMAGE_ID
